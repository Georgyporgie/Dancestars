<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sunny Dance Radio Stars</title>
  <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
  <div class="page">
    <div class="gallery">
      <figure class="artist-card">
        <img id="travolta" alt="Scheduled visual" />
        <figcaption id="travolta-name" class="handwritten"></figcaption>
      </figure>

      <figure class="artist-card">
        <img id="max" alt="Secondary visual" />
        <figcaption id="max-name" class="handwritten"></figcaption>
      </figure>
    </div>
  </div>

  <script>
  // ---------- Data ----------
  const IMAGES = {
    sunday: [
      { start: 0,  end: 12, src: 'images/Ava Max.png', alt: 'Sunday Morning', artist: 'Ava Max' },
      { start: 12, end: 19, src: 'images/Michael Jacks.png', alt: 'Sunday Afternoon', artist: 'Michael Jackson' },
      { start: 19, end: 24, src: 'images/Rihanna.jpg', alt: 'Sunday Evening', artist: 'Rihanna' }
    ],
    // ... other days ...
  };

  function getRulesFor(now) {
    const dayNames = ['sunday','monday','tuesday','wednesday','thursday','friday','saturday'];
    return IMAGES[dayNames[now.getDay()]];
  }
  function getRuleFor(now) {
    const hour = now.getHours();
    return getRulesFor(now).find(r => hour >= r.start && hour < r.end);
  }
  function getComplementaryRule(now, excludeSrc) {
    const rules = getRulesFor(now);
    const currentIndex = rules.findIndex(r => r.src === excludeSrc);
    if (currentIndex === -1) return getRuleFor(now);
    const nextIndex = (currentIndex + 1) % rules.length;
    return rules[nextIndex];
  }
  function setImage(el, rule) {
    if (!el || !rule) return;
    const cap = document.getElementById(`${el.id}-name`);
    el.src = rule.src;
    el.alt = rule.alt || '';
    if (cap) {
      cap.textContent = rule.artist;
      cap.classList.add('show');
    }
  }
  function updateImages() {
    const now = new Date();
    const ruleTravolta = getRuleFor(now);
    const ruleMax = getComplementaryRule(now, ruleTravolta.src);
    setImage(document.getElementById('travolta'), ruleTravolta);
    setImage(document.getElementById('max'), ruleMax);
  }

  // ---------- Ritual ----------
  const sounds = [
    "muziek/effects/Michael Speakin Fans.mp3",
    "muziek/effects/Michael Speakin Fans - 2.mp3",
    "muziek/effects/Michael Speakin Fans - 3.mp3"
  ];
  function playSound(file) {
    const audio = new Audio(file);
    audio.play().catch(err => console.log("Play failed:", err));
  }

  document.addEventListener("DOMContentLoaded", () => {
    updateImages();

    const travoltaImg = document.getElementById("travolta");
    travoltaImg.addEventListener("click", () => {
      const currentArtist = document.getElementById("travolta-name").textContent;
      if (currentArtist === "Michael Jackson") {
        // Unlock audio
        const unlock = new Audio();
        unlock.load();
        console.log("Audio unlocked");

        // Play one random Michael sound
        const chosen = sounds[Math.floor(Math.random() * sounds.length)];
        playSound(chosen);
      }
    });
  });
  </script>
</body>
</html>
